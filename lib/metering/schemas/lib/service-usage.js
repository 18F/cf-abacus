'use strict';

// Service usage schema

var _ = require('underscore');

var schema = require('abacus-schema');
var usage = require('./usage.js');

var clone = _.clone;
var extend = _.extend;

var string = schema.types.string;
var object = schema.types.object;
var arrayOf = schema.types.arrayOf;

// Service instance schema
var serviceInstance = object({
  service_instance_id: string(),
  usage: arrayOf(usage())
}, ['service_instance_id', 'usage']);

// Export our public functions
module.exports = function () {
  return extend(clone(object({
    service_instances: arrayOf(serviceInstance)
  }, ['service_instances'])), {
    title: 'Service Usage',
    description: 'Usage records for a service'
  });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zZXJ2aWNlLXVzYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztBQUliLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFFaEMsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3hDLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFFcEMsSUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUN0QixJQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDOztBQUV4QixJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUNuQyxJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUNuQyxJQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQzs7O0FBR3JDLElBQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQztBQUM3QixxQkFBbUIsRUFBRSxNQUFNLEVBQUU7QUFDN0IsT0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztDQUN4QixFQUFFLENBQUMscUJBQXFCLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQzs7O0FBR3JDLE1BQU0sQ0FBQyxPQUFPLEdBQUc7U0FBTSxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUN2QyxxQkFBaUIsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDO0dBQzVDLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUMxQixTQUFLLEVBQUUsZUFBZTtBQUN0QixlQUFXLEVBQUUsNkJBQTZCO0dBQzNDLENBQUM7Q0FBQSxDQUFDIiwiZmlsZSI6InNlcnZpY2UtdXNhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8vIFNlcnZpY2UgdXNhZ2Ugc2NoZW1hXG5cbmNvbnN0IF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG5cbmNvbnN0IHNjaGVtYSA9IHJlcXVpcmUoJ2FiYWN1cy1zY2hlbWEnKTtcbmNvbnN0IHVzYWdlID0gcmVxdWlyZSgnLi91c2FnZS5qcycpO1xuXG5jb25zdCBjbG9uZSA9IF8uY2xvbmU7XG5jb25zdCBleHRlbmQgPSBfLmV4dGVuZDtcblxuY29uc3Qgc3RyaW5nID0gc2NoZW1hLnR5cGVzLnN0cmluZztcbmNvbnN0IG9iamVjdCA9IHNjaGVtYS50eXBlcy5vYmplY3Q7XG5jb25zdCBhcnJheU9mID0gc2NoZW1hLnR5cGVzLmFycmF5T2Y7XG5cbi8vIFNlcnZpY2UgaW5zdGFuY2Ugc2NoZW1hXG5jb25zdCBzZXJ2aWNlSW5zdGFuY2UgPSBvYmplY3Qoe1xuICBzZXJ2aWNlX2luc3RhbmNlX2lkOiBzdHJpbmcoKSxcbiAgdXNhZ2U6IGFycmF5T2YodXNhZ2UoKSlcbn0sIFsnc2VydmljZV9pbnN0YW5jZV9pZCcsICd1c2FnZSddKTtcblxuLy8gRXhwb3J0IG91ciBwdWJsaWMgZnVuY3Rpb25zXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IGV4dGVuZChjbG9uZShvYmplY3Qoe1xuICAgIHNlcnZpY2VfaW5zdGFuY2VzOiBhcnJheU9mKHNlcnZpY2VJbnN0YW5jZSlcbiAgfSwgWydzZXJ2aWNlX2luc3RhbmNlcyddKSksIHtcbiAgICB0aXRsZTogJ1NlcnZpY2UgVXNhZ2UnLFxuICAgIGRlc2NyaXB0aW9uOiAnVXNhZ2UgcmVjb3JkcyBmb3IgYSBzZXJ2aWNlJ1xuICB9KTtcblxuIl19