'use strict';

// Service instance usage schema

var _ = require('underscore');

var schema = require('abacus-schema');
var usage = require('./usage.js');

var clone = _.clone;
var extend = _.extend;

var string = schema.types.string;
var object = schema.types.object;
var arrayOf = schema.types.arrayOf;

// Export our public functions
module.exports = function () {
  return extend(clone(object({
    service_id: string(),
    usage: arrayOf(usage())
  }, ['service_id', 'usage'])), {
    title: 'Service Instance Usage',
    description: 'Usage records for a service instance'
  });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zZXJ2aWNlLWluc3RhbmNlLXVzYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztBQUliLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFFaEMsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3hDLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFFcEMsSUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUN0QixJQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDOztBQUV4QixJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUNuQyxJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUNuQyxJQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQzs7O0FBR3JDLE1BQU0sQ0FBQyxPQUFPLEdBQUc7U0FBTSxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUN2QyxjQUFVLEVBQUUsTUFBTSxFQUFFO0FBQ3BCLFNBQUssRUFBRSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7R0FDeEIsRUFBRSxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDNUIsU0FBSyxFQUFFLHdCQUF3QjtBQUMvQixlQUFXLEVBQUUsc0NBQXNDO0dBQ3BELENBQUM7Q0FBQSxDQUFDIiwiZmlsZSI6InNlcnZpY2UtaW5zdGFuY2UtdXNhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8vIFNlcnZpY2UgaW5zdGFuY2UgdXNhZ2Ugc2NoZW1hXG5cbmNvbnN0IF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG5cbmNvbnN0IHNjaGVtYSA9IHJlcXVpcmUoJ2FiYWN1cy1zY2hlbWEnKTtcbmNvbnN0IHVzYWdlID0gcmVxdWlyZSgnLi91c2FnZS5qcycpO1xuXG5jb25zdCBjbG9uZSA9IF8uY2xvbmU7XG5jb25zdCBleHRlbmQgPSBfLmV4dGVuZDtcblxuY29uc3Qgc3RyaW5nID0gc2NoZW1hLnR5cGVzLnN0cmluZztcbmNvbnN0IG9iamVjdCA9IHNjaGVtYS50eXBlcy5vYmplY3Q7XG5jb25zdCBhcnJheU9mID0gc2NoZW1hLnR5cGVzLmFycmF5T2Y7XG5cbi8vIEV4cG9ydCBvdXIgcHVibGljIGZ1bmN0aW9uc1xubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiBleHRlbmQoY2xvbmUob2JqZWN0KHtcbiAgICBzZXJ2aWNlX2lkOiBzdHJpbmcoKSxcbiAgICB1c2FnZTogYXJyYXlPZih1c2FnZSgpKVxuICB9LCBbJ3NlcnZpY2VfaWQnLCAndXNhZ2UnXSkpLCB7XG4gICAgdGl0bGU6ICdTZXJ2aWNlIEluc3RhbmNlIFVzYWdlJyxcbiAgICBkZXNjcmlwdGlvbjogJ1VzYWdlIHJlY29yZHMgZm9yIGEgc2VydmljZSBpbnN0YW5jZSdcbiAgfSk7XG5cbiJdfQ==