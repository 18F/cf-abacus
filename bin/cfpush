#!/bin/bash

# Push all the Abacus apps to Cloud Foundry
export CONF=default
if [ -n "$1" ]; then
  export CONF=$1
fi

node_modules/abacus-etc/apprc node_modules/abacus-etc/apps.rc $CONF apps | awk '{
  printf "(INSTANCES=$(node_modules/abacus-etc/apprc %s/.apprc $CONF INSTANCES) && (cd %s && npm run cfpush -- -i $INSTANCES))\n", $1, $1;
}' | bash

